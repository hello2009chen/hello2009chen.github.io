---
layout:     post
title:      React 哲学
subtitle:   React
date:       2020-02-14
author:     wellong
header-img: img/post-bg-debug.png
catalog: true
tags:
    - React
---


React 作为前端的主要框架，其快速构建，模块化的思想，深受广大开发者的喜爱。最强大的一部分在于其让你思考你的 App 如何构建，如何清晰的将组件模块化。

## Step 1. 将 UI 按层级组件化
首先你需要将 UI 设计稿模块化并为每一部分命名，遵循单一职责原则，每个组件只做一件事情，根据你的接口数据模块，你的 UI 模块化会更加契合。

## Step 2. 构建静态页面版本
现在你已经将组件层级化了，已经可以构建你的 App 了，最方便的方式是构建没有交互的静态页面。构建静态页面你会用到 props，一点也不要用到 state，state 是为交互保留的，构建静态页面不需要用到它。

Props vs State
1.props 是传递给组件的（类似于函数的形参），
2.state 是在组件内被组件自己管理的（类似于在一个函数内声明的变量），state 的变化会导致页面重新渲染，用于页面的数据交互

## Step 3. 确定最小的 UI 呈现 State
为了让你的 UI 有交互，你需要使用 state 改变你的数据模型，正确的构建你的 App，你需要找到你的 App 需要的最小的可变的 state。首要原则是 **DRY: Don’t Repeat Yourself**。

让我们审视每块，指出哪块才是 state，问三个关于每块的问题
> 1.它是不是通过 props 从父组件中传递过来? 如果是，它不是 state

> 2.它是不是一直保持不变? 如果是，它不是 state

> 3.它是不是通过其他的 state 或 props 计算出来? 如果是，它不是 state

## Step 4.确定你的 state 的位置
现在已经确定了 App 的最小 state，接下来我们需要确定哪些组件改变或拥有这些 state。
> 1.确定每个基于 state 展示的组件

> 2.找出公共组件

> 3.每个公共组件或层级更高的其他组件拥有该 state

> 4.如果找不到拥有该 state 的关联组件，单独创建拥有该 state 的组件，并且层级在所有的公共组件之上。

## Step 5.添加反向数据流
目前为止，构建 App 数据流向始终至上而下，现在需要低层级的组件更新父组件的 state，React 让数据流动清晰的展示你的 App 是如何运转的。
React 通过比传统的双向绑定略繁琐的方式实现数据的反向传递，
子组件通过传入的父组件的回调函数更新 state。


